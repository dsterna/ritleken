(this.webpackJsonpritleken=this.webpackJsonpritleken||[]).push([[0],{77:function(e,t,a){},80:function(e,t,a){},93:function(e,t,a){"use strict";a.r(t);a(77),a(78);var c=a(53),n=a.n(c),r=a(63),s=a(27),o=a(19),i=a(14),j=(a(80),a(34)),l=a(15),b=a(0),u=function(e){return{type:"ISHOSTCHANGER",payload:e}},d=function(e){return{type:"GAMECODECHANGER",payload:e}},O=a(20),f=a(139),h=a(57),p=a(140),m=a(138),x=a(137),y=a(136),v=a(143),g=a(132),S=a(141),C=a(142),E=a(95),N=(a(94),a(54));N.a.initializeApp({apiKey:"AIzaSyCam1vXotzoIfZT7DyTbF8XSnLe0he-Uto",authDomain:"adealbreaker-c9190.firebaseapp.com",databaseURL:"https://adealbreaker-c9190.firebaseio.com",projectId:"adealbreaker-c9190",storageBucket:"adealbreaker-c9190.appspot.com",messagingSenderId:"621961109952",appId:"1:621961109952:web:ae70fc224efd7b3cb8e825"});var k=N.a,A=a.p+"static/media/temp.1f0dee70.jpg",R=a(4);var w=function(e){var t=Object(O.c)((function(e){return e.name})),a=Object(O.b)();return Object(R.jsxs)(g.a,{maxWidth:"sm",className:"container",children:[Object(R.jsx)(y.a,{component:"img",alt:"Contemplative Reptile",height:"140",image:A,title:"tmep"}),Object(R.jsxs)(x.a,{children:[Object(R.jsx)(E.a,{gutterBottom:!0,variant:"h5",component:"h2",children:"Ritleken"}),Object(R.jsx)(E.a,{variant:"body2",color:"textSecondary",component:"p",children:"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Saepe non rem inventore repellendus est exercitationem nihil earum consequatur libero corrupti?"})]}),Object(R.jsxs)(m.a,{style:{display:"flex",justifyContent:"space-around"},children:[Object(R.jsx)(j.b,{to:"/join",children:Object(R.jsx)(f.a,{size:"small",color:"primary",onClick:function(){a(u(!1))},children:"Joina spel  "})}),Object(R.jsxs)(j.b,{to:"/lobby",children:[" ",Object(R.jsx)(f.a,{size:"small",color:"primary",onClick:function(){a(u(!0)),a(d(t.code))},children:"Skapa rum"})]})]})]})},H=function(e){var t=Object(O.c)((function(e){return e.name})),a=Object(O.c)((function(e){return e.game.isHost})),c=Object(O.c)((function(e){return e.game.gameCode})),u=Object(b.useState)([]),d=Object(i.a)(u,2),h=d[0],y=d[1],v=Object(b.useState)(t.userName),g=Object(i.a)(v,2),S=g[0],N=g[1],A=Object(b.useState)(!1),w=Object(i.a)(A,2),H=w[0],D=w[1],_=Object(l.f)(),M=Object(O.b)(),z=Object(l.g)(),G=Object(b.useState)({}),I=Object(i.a)(G,2),T=I[0],B=I[1],L=c&&k.firestore().collection("rooms").doc("".concat(c));Object(b.useEffect)((function(){var e;a&&L.set({}),L.update((e={},Object(s.a)(e,"players.".concat(t.code),Object(o.a)(Object(o.a)({},t),{},{isHost:a})),Object(s.a)(e,"gameStarted",!1),e))}),[]),Object(b.useEffect)((function(){var e=k.firestore().collection("rooms").doc("".concat(c)).onSnapshot((function(e){"/lobby"===z.pathname&&e&&e.data()&&(y(Object.values(e.data().players)),B(e.data().players),D(e.data().gameStarted))}));return function(){return e()}}),[]),Object(b.useEffect)((function(){(function(){var e=Object(r.a)(n.a.mark((function e(){var c,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=""!==S?S:"player-".concat(t.code),M({type:"NAMECHANGER",payload:c});try{L.update((r={},Object(s.a)(r,"players.".concat(t.code),Object(o.a)(Object(o.a)({},t),{},{userName:c,isHost:a})),Object(s.a)(r,"gameStarted",!1),r))}catch(n){}case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[S]);return Object(b.useEffect)((function(){H&&_.push("/write")}),[H]),Object(R.jsxs)(p.a,{className:"card-class",style:{padding:"1rem"},children:[Object(R.jsxs)(x.a,{children:[Object(R.jsxs)(E.a,{variant:"h5",component:"h2",children:["Lobby ",c]}),Object(R.jsx)("h3",{children:H?"Startad":"V\xe4ntar"}),Object(R.jsx)("ul",{children:h.map((function(e){return Object(R.jsx)("li",{children:e.userName},e.code)}))})]}),Object(R.jsx)(m.a,{}),Object(R.jsx)(C.a,{value:S,id:"outlined-basic",label:"Namn",variant:"outlined",onChange:function(e){N(e.target.value)}}),Object(R.jsxs)(m.a,{style:{display:"flex",justifyContent:"space-around"},children:[Object(R.jsxs)(j.b,{to:"/",children:["   ",Object(R.jsx)(f.a,{size:"small",color:"primary",onClick:function(){},children:"Avbryt "})]}),a&&Object(R.jsx)(f.a,{size:"small",color:"primary",onClick:function(){!function(){var e=h.length-1,t=T;h.forEach((function(a,c){t[a.code].order=h.map((function(t,a){return h[c+a>e?a+c-e-1:c+a].code})),t[a.code].ready=!1})),L.update({round:0,rounds:e+1,players:t})}(),L.update({gameStarted:!0})},children:" Starta  "})]})]})},D=function(e){var t=Object(b.useState)(""),a=Object(i.a)(t,2),c=a[0],n=a[1],r=Object(O.b)();return Object(R.jsxs)(p.a,{className:"card-class",style:{padding:"1rem"},children:[Object(R.jsx)(x.a,{children:Object(R.jsx)(E.a,{variant:"h5",component:"h2",children:"Joina spel"})}),Object(R.jsx)(m.a,{children:Object(R.jsx)(C.a,{value:c,id:"outlined-basic",label:"Anslutningskod",variant:"outlined",onChange:function(e){return n(e.target.value)}})}),Object(R.jsxs)(m.a,{style:{display:"flex",justifyContent:"space-around"},children:[Object(R.jsx)(j.b,{to:"/",children:Object(R.jsx)(f.a,{size:"small",color:"primary",onClick:function(){},children:"Avbryt "})}),Object(R.jsx)(j.b,{to:"/lobby",children:Object(R.jsx)(f.a,{size:"small",color:"primary",onClick:function(){r(d(c))},children:"Hitta spel "})})]})]})},_=function(e){var t=Object(O.c)((function(e){return e.name.code})),a=Object(O.c)((function(e){return e.game.gameCode})),c=a&&k.firestore().collection("rooms").doc("".concat(a)),n=Object(b.useState)(99),r=Object(i.a)(n,2),o=r[0],j=r[1],d=Object(b.useState)([]),f=Object(i.a)(d,2),h=f[0],p=f[1],y=Object(b.useState)(""),N=Object(i.a)(y,2),A=N[0],w=N[1],H=Object(b.useState)(0),D=Object(i.a)(H,2),_=D[0],M=D[1],z=Object(b.useState)(0),G=Object(i.a)(z,2),I=G[0],T=G[1],B=Object(b.useState)(!1),L=Object(i.a)(B,2),X=L[0],U=L[1],J=Object(l.f)(),W=Object(l.g)();Object(b.useEffect)((function(){var e=c.onSnapshot((function(e){if("/write"===W.pathname&&e.data()){var t=e.data().players,a=e.data().round;p(t),M(a),T(Object.values(t).filter((function(e){return e.ready})).length),j(Object.values(t).length)}}));return function(){return e()}}),[]);var P=function(e){if(e.preventDefault(),""!==A){U(!0);var a=h[t];a.ready=!0,a[_]=A;var n={};n["players."+t]=a,c.update(n)}};return Object(b.useEffect)((function(){if(I===o){if(u){var e=h;Object.keys(h).forEach((function(t){return e[t].ready=!1})),c.update({round:_+1,players:e})}J.push("/draw")}}),[I]),Object(R.jsxs)(g.a,{maxWidth:"sm",className:"container",children:[Object(R.jsx)(x.a,{children:Object(R.jsx)(E.a,{gutterBottom:!0,variant:"h5",component:"h3",style:{marginBottom:0,textAlign:"center"},children:"Skriv ditt ord:"})}),Object(R.jsxs)(m.a,{style:Object(s.a)({display:"flex",justifyContent:"space-around"},"justifyContent","center"),children:[Object(R.jsxs)("form",{onSubmit:function(e){return P(e)},children:[" ",Object(R.jsx)(C.a,{disabled:X,id:"standard-basic",label:"",value:A,onChange:function(e){w(e.target.value)}})]}),Object(R.jsx)("br",{})]}),Object(R.jsx)(m.a,{style:{display:"flex",justifyContent:"space-around"},children:Object(R.jsx)(S.a,{control:Object(R.jsx)(v.a,{checked:X,onChange:function(e){return P(e)},name:"checkedB",color:"primary",disabled:X}),label:"Redo (".concat(I,")")})})]})},M=function(){var e=Object(O.c)((function(e){return e.name.code})),t=Object(O.c)((function(e){return e.game.gameCode})),a=Object(b.useRef)(""),c=t&&k.firestore().collection("rooms").doc("".concat(t)),n=Object(b.useState)([]),r=Object(i.a)(n,2),o=r[0],j=r[1],d=Object(b.useState)(""),f=Object(i.a)(d,2),p=f[0],y=f[1],N=Object(b.useState)(""),A=Object(i.a)(N,2),w=A[0],H=A[1],D=Object(b.useState)(0),_=Object(i.a)(D,2),M=_[0],z=_[1],G=Object(b.useState)(0),I=Object(i.a)(G,2),T=I[0],B=I[1],L=Object(b.useState)(99),X=Object(i.a)(L,2),U=X[0],J=X[1],W=Object(b.useState)(!1),P=Object(i.a)(W,2),V=P[0],F=P[1],q=Object(b.useState)(!1),K=Object(i.a)(q,2),Y=K[0],Z=K[1],Q=Object(b.useState)(),$=Object(i.a)(Q,2),ee=$[0],te=$[1],ae=Object(l.f)(),ce=Object(l.g)();Object(b.useEffect)((function(){!0===Y&&F(!1);var t=c.onSnapshot((function(t){if("/draw"===ce.pathname&&t.data()){var a=t.data().players,c=t.data().round;if(c===Object.values(a).length)ae.push("/done");else{j(a),z(c);var n=!(M%2!==0);B(Object.values(a).filter((function(e){return e.ready})).length),J(Object.values(a).length);var r=a[e].order[c];te(n),y(a[r][c-1])}}}));return Z(!1),function(){return t()}}),[Y]),Object(b.useEffect)((function(){if(p)if(ee)a.current.clear();else{var t=o[e].order[M];a.current.loadSaveData(o[t][M-1],!0)}}),[ee]);var ne=function(t){if(t.preventDefault(),""!==w||ee){F(!0);var n=o[e];n.ready=!0,n[M]=ee?a.current.getSaveData():w;var r={};r["players."+e]=n,c.update(r)}};return Object(b.useEffect)((function(){if(T===U){if(u){c.update({round:M+1});var e=o;Object.keys(o).forEach((function(t){return e[t].ready=!1})),c.update({round:M+1,players:e})}Z(!0)}}),[T]),Object(R.jsxs)(g.a,{maxWidth:"sm",className:"container",children:[Object(R.jsx)(x.a,{children:Object(R.jsx)(E.a,{gutterBottom:!0,variant:"h5",component:"h2",style:{textAlign:"center"},children:ee&&"Rita ".concat(p)})}),Object(R.jsx)(m.a,{style:Object(s.a)({display:"flex",justifyContent:"space-around"},"justifyContent","center"),children:Object(R.jsx)(h.a,{disabled:V,ref:a})}),!ee&&Object(R.jsx)(m.a,{style:Object(s.a)({display:"flex",justifyContent:"space-around"},"justifyContent","center"),children:Object(R.jsxs)("form",{onSubmit:function(e){return ne(e)},children:[" ",Object(R.jsx)(C.a,{disabled:V||ee,id:"standard-basic",label:"",value:w,onChange:function(e){H(e.target.value)}})]})}),Object(R.jsx)("br",{}),Object(R.jsx)(m.a,{style:{display:"flex",justifyContent:"space-around"},children:Object(R.jsx)(S.a,{control:Object(R.jsx)(v.a,{checked:V,onClick:function(e){return ne(e)},name:"checkedB",color:"primary",disabled:V}),label:"Redo (".concat(T,")")})})]})},z=function(e){var t=Object(O.c)((function(e){return e.game.gameCode})),a=Object(O.c)((function(e){return e.name.code})),c=t&&k.firestore().collection("rooms").doc("".concat(t)),n=Object(b.useState)(),r=Object(i.a)(n,2),o=r[0],l=r[1],u=Object(O.b)();return Object(b.useEffect)((function(){c.get().then((function(e){e.exists&&l(e.data().players)}))}),[]),Object(R.jsxs)(g.a,{maxWidth:"sm",className:"container",children:[Object(R.jsx)(x.a,{children:o&&Object(R.jsx)("h2",{style:{textAlign:"center"},children:o[a].userName})}),o&&Object.keys(o).map((function(e,t){return Object(R.jsx)("div",{children:t%2===0?Object(R.jsx)("h2",{style:{textAlign:"center"},children:o[e][t]}):Object(R.jsxs)("div",{style:Object(s.a)({display:"flex",justifyContent:"space-around"},"justifyContent","center"),children:[" ",Object(R.jsx)(h.a,{disabled:!0,saveData:o[e][t]})]})})})),Object(R.jsx)(m.a,{style:{display:"flex",justifyContent:"space-around"},children:Object(R.jsxs)(j.b,{to:"/",children:[" ",Object(R.jsx)(f.a,{size:"small",color:"primary",onClick:function(){c&&(c.delete(),u((console.log("Hej dag"),{type:"NAMECODECHANGER"})))},children:"Tillbaka"})]})})]})},G=function(){return Object(R.jsx)("div",{children:Object(R.jsx)(j.a,{children:Object(R.jsx)("div",{className:"wapper",children:Object(R.jsxs)(l.c,{children:[Object(R.jsx)(l.a,{exact:!0,path:"/lobby",children:Object(R.jsx)(H,{})}),Object(R.jsx)(l.a,{exact:!0,path:"/join",children:Object(R.jsx)(D,{})}),Object(R.jsx)(l.a,{exact:!0,path:"/write",children:Object(R.jsx)(_,{})}),Object(R.jsx)(l.a,{exact:!0,path:"/draw",children:Object(R.jsx)(M,{})}),Object(R.jsx)(l.a,{exact:!0,path:"/done",children:Object(R.jsx)(z,{})}),Object(R.jsx)(l.a,{path:"/",children:Object(R.jsx)(w,{})})]})})})})},I=a(11),T=a.n(I),B=a(50),L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{gameCode:"",isHost:!0,nrOfPlayers:2},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GAMECODECHANGER":return Object(o.a)(Object(o.a)({},e),{},{gameCode:t.payload});case"ISHOSTCHANGER":return Object(o.a)(Object(o.a)({},e),{},{isHost:t.payload});case"SETNUMBEROFPLAYERS":return Object(o.a)(Object(o.a)({},e),{},{nrOfPlayers:t.payload});default:return e}},X=Math.floor(1e3+9e3*Math.random()),U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{code:X,userName:"spelare-".concat(X)},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NAMECHANGER":return Object(o.a)(Object(o.a)({},e),{},{userName:t.payload});case"NAMECODECHANGER":var a=Math.floor(1e3+9e3*Math.random());return Object(o.a)(Object(o.a)({},e),{},{code:a});default:return e}},J=Object(B.a)({name:U,game:L}),W=Object(B.b)(J,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());T.a.render(Object(R.jsx)(O.a,{store:W,children:Object(R.jsx)(G,{})}),document.getElementById("root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.8b9f6d84.chunk.js.map